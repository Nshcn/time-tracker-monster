{"version":3,"sources":["monster.js","img/crab.png","img/flydragon.png","App.js","index.js"],"names":["App","timer","useRef","useState","activeID","setActivityID","pet","setPet","hp","setHp","loading","setLoading","petatk","setPetatk","enermy","setEnermy","level","setLevel","enermyhp","setEnermyhp","enermyatk","setEnermyatk","coin","setCoin","useEffect","current","setInterval","localStorage","getItem","JSON","parse","monProps","m","Object","create","monster","Math","floor","random","console","log","hpbase","ceil","sqrt","atkbase","defbase","tem","max","parseInt","setItem","clearInterval","className","src","dataURL","alt","imgURL","value","onClick","ps","stringify","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec624dd2.chunk.js","sourcesContent":["import crab from'./img/crab.png';\r\nimport flyDragon from './img/flydragon.png'\r\nexport default [{\r\n        \"id\": 1,\r\n        \"name\": \"crabKing\",\r\n        \"imgURL\": crab,\r\n        \"hpbase\":256,\r\n        \"atkbase\":10,\r\n        \"defbase\":45\r\n    },\r\n    {\r\n        \"id\": 2,\r\n        \"name\": \"flyDragon\",\r\n        \"imgURL\": flyDragon,\r\n        \"hpbase\":80,\r\n        \"atkbase\":230,\r\n        \"defbase\":9\r\n    }\r\n]","export default __webpack_public_path__ + \"static/media/crab.4783935e.png\";","export default __webpack_public_path__ + \"static/media/flydragon.d74481c2.png\";","import { useState, useEffect, useRef } from 'react'\nimport './App.css';\nimport monster from './monster';\n\nfunction App() {\n  let timer = useRef();\n  let [activeID, setActivityID] = useState(\"\");\n  let [pet, setPet] = useState(null);\n  let [hp, setHp] = useState(null);\n  let [loading, setLoading] = useState(true);\n  let [petatk, setPetatk] = useState(null);\n  let [enermy, setEnermy] = useState(null);\n  let [level, setLevel] = useState(-1);\n  let [enermyhp, setEnermyhp] = useState(null);\n  let [enermyatk, setEnermyatk] = useState(\"\");\n  let [coin, setCoin] = useState(null);\n  useEffect(() => {\n    timer.current = setInterval(() => {\n      //初始化宠物\n      if (pet === null) {\n        let activeID = localStorage.getItem(\"activeID\");\n\n        if (!activeID) {\n          setLoading(false);\n          return;\n        }\n        setActivityID(activeID);\n        let pet = (JSON.parse(localStorage.getItem(\"pets\")));\n        setPet(pet[activeID]);\n        setHp(pet[activeID].monProps[0]);\n      }\n\n      setCoin(localStorage.getItem(\"coin\") || 0);\n      //初始化关卡\n      if (level === -1) {\n        setLevel(localStorage.getItem(\"level\") || 1);\n        return;\n      }\n\n      //初始化敌人\n      if (enermy === null) {\n        const m = Object.create(monster[Math.floor(Math.random() * 2)]);\n        console.log(level);\n        m.hpbase = Math.ceil(m.hpbase * level + Math.random() * Math.sqrt(level) * level);\n        m.atkbase = Math.ceil(m.atkbase * level + Math.random() * Math.sqrt(level) * level);\n        m.defbase = Math.ceil(m.defbase * level + Math.random() * Math.sqrt(level) * level);\n        setEnermy(m);\n        setEnermyhp(m.hpbase);\n      }\n\n      if (petatk === null)\n        setPetatk(\"atk\");\n\n      if (activeID && pet && enermy && petatk != null) {\n        setLoading(false);\n        if (enermyatk === \"\") {\n          if (hp <= 0) {\n            setPetatk(null);\n            setEnermy(null);\n            setEnermyatk(\"\");\n            setLoading(true);\n            setPet(null);\n            setHp(pet.monProps[0]);\n            return;\n          }\n\n          let tem = enermyhp -\n            Math.max(0, (pet.monProps[1] - enermy.defbase) +\n              Math.floor(Math.random() * pet.monProps[1] - pet.monProps[1] / 2));\n          setEnermyhp(tem);\n          setPetatk(\"\");\n          if (enermyhp > 0) {\n            setEnermyatk(\"atk\");\n          }\n        } else if (petatk === \"\") {\n          if (enermyhp <= 0) {\n            setPetatk(null);\n            setPet(null);\n            setEnermy(null);\n            setLevel(parseInt(level) + 1);\n            localStorage.setItem(\"level\", parseInt(level) + 1);\n            setHp(pet.monProps[0]);\n            setLoading(true);\n            setEnermyatk(\"\");\n            return;\n          }\n\n          hp -= Math.max(0, (enermy.atkbase - pet.monProps[2]) +\n            Math.floor(Math.random() * enermy.atkbase - enermy.atkbase / 2));\n          setHp(hp);\n\n          setEnermyatk(\"\");\n          if (hp > 0) {\n            setPetatk(\"atk\");\n          }\n\n\n\n\n        }\n      }\n    }, 1000);\n\n    return () => {\n      clearInterval(timer.current);\n    }\n  });\n\n  return (\n    <div className=\"fight-container\">\n      {\n        activeID && pet && enermy ?\n          <div>\n            <h1>第{level}关</h1>\n            <div>时空能量：{coin}</div>\n            <div className=\"fight\">\n              <div className=\"img-container\">\n                <img className={petatk} src={pet.dataURL} alt=\"\" />\n              </div>\n              <div className=\"img-container enermy\">\n                <img className={enermyatk} src={enermy.imgURL} alt=\"\" />\n              </div>\n            </div>\n            <div className=\"props-container\">\n              <div className=\"props\">\n                <b>我方血量：<progress className=\"HP-progress\" max={pet.monProps[0]} value={hp}></progress></b>\n                <p>血量:{hp}/{pet.monProps[0]}<button className=\"props-plus\"\n                  onClick={() => {\n                    if (coin >= 100) {\n                      setCoin(coin - 100);\n                      localStorage.setItem(\"coin\", coin - 100);\n                      let ps =\n                        JSON.parse(localStorage.getItem(\"pets\"));\n\n                      let id = localStorage.getItem(\"activeID\");\n                      ps[id].monProps[0] -= (-level);\n                      pet.monProps[0] -= (-level);\n                      localStorage.setItem(\"pets\", JSON.stringify(ps));\n                    }\n                  }}>+</button></p>\n                <p>攻击:{pet.monProps[1]}<button className=\"props-plus\"\n                  onClick={() => {\n                    if (coin >= 100) {\n                      setCoin(coin - 100);\n                      localStorage.setItem(\"coin\", coin - 100);\n                      let ps =\n                        JSON.parse(localStorage.getItem(\"pets\"));\n\n                      let id = localStorage.getItem(\"activeID\");\n                      ps[id].monProps[1] -= (-level);\n                      pet.monProps[1] -= (-level);\n                      localStorage.setItem(\"pets\", JSON.stringify(ps));\n                    }\n                  }}>+</button></p>\n                <p>防御:{pet.monProps[2]}<button className=\"props-plus\" onClick={() => {\n                  if (coin >= 100) {\n                    setCoin(coin - 100);\n                    localStorage.setItem(\"coin\", coin - 100);\n                    let ps =\n                      JSON.parse(localStorage.getItem(\"pets\"));\n\n                    let id = localStorage.getItem(\"activeID\");\n                    ps[id].monProps[2] -= (-Math.ceil(Math.sqrt(level)));\n                    pet.monProps[2] -= (-Math.ceil(Math.sqrt(level)));\n                    localStorage.setItem(\"pets\", JSON.stringify(ps));\n                  }\n                }}>+</button></p>\n              </div>\n              <div className=\"props\">\n                <b>敌方血量：<progress className=\"HP-progress\" max={enermy.hpbase} value={enermyhp}></progress></b>\n                <p>血量:{enermyhp}/{enermy.hpbase}</p>\n                <p>攻击:{enermy.atkbase}</p>\n                <p>防御:{enermy.defbase}</p>\n              </div>\n            </div>\n          </div>\n          :\n          loading ? <h1>Loading...</h1> : <h1>请先设置上场宠物</h1>\n      }\n    </div>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}