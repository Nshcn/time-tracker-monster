{"version":3,"sources":["monster.js","img/crab.png","img/flydragon.png","App.js","index.js"],"names":["App","timer","useRef","useState","activeID","setActivityID","pet","setPet","hp","setHp","loading","setLoading","petatk","setPetatk","enermy","setEnermy","level","setLevel","enermyhp","setEnermyhp","enermyatk","setEnermyatk","coin","setCoin","useEffect","current","setInterval","localStorage","getItem","JSON","parse","monProps","m","Object","create","monster","Math","floor","random","hpbase","ceil","sqrt","atkbase","defbase","tem","max","parseInt","setItem","clearInterval","className","src","dataURL","alt","imgURL","value","display","onClick","ps","stringify","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"6KAEe,G,MAAA,CAAC,CACR,GAAM,EACN,KAAQ,WACR,OCLO,IAA0B,iCDMjC,OAAS,IACT,QAAU,GACV,QAAU,IAEd,CACI,GAAM,EACN,KAAQ,YACR,OEbO,IAA0B,sCFcjC,OAAS,GACT,QAAU,IACV,QAAU,K,OGsKHA,MAlLf,WACE,IAAIC,EAAQC,mBADC,EAEmBC,mBAAS,IAF5B,mBAERC,EAFQ,KAEEC,EAFF,OAGOF,mBAAS,MAHhB,mBAGRG,EAHQ,KAGHC,EAHG,OAIKJ,mBAAS,MAJd,mBAIRK,EAJQ,KAIJC,EAJI,OAKeN,oBAAS,GALxB,mBAKRO,EALQ,KAKCC,EALD,OAMaR,mBAAS,MANtB,mBAMRS,EANQ,KAMAC,EANA,OAOaV,mBAAS,MAPtB,mBAORW,EAPQ,KAOAC,EAPA,OAQWZ,oBAAU,GARrB,mBAQRa,EARQ,KAQDC,EARC,OASiBd,mBAAS,MAT1B,mBASRe,EATQ,KASEC,EATF,OAUmBhB,mBAAS,IAV5B,mBAURiB,EAVQ,KAUGC,EAVH,OAWSlB,mBAAS,MAXlB,mBAWRmB,EAXQ,KAWFC,EAXE,KAsGb,OA1FAC,qBAAU,WAqFR,OApFAvB,EAAMwB,QAAUC,aAAY,WAE1B,GAAY,OAARpB,EAAc,CAChB,IAAIF,EAAWuB,aAAaC,QAAQ,YAEpC,IAAKxB,EAEH,YADAO,GAAW,GAGbN,EAAcD,GACd,IAAIE,EAAOuB,KAAKC,MAAMH,aAAaC,QAAQ,SAC3CrB,EAAOD,EAAIF,IACXK,EAAMH,EAAIF,GAAU2B,SAAS,IAK/B,GAFAR,EAAQI,aAAaC,QAAQ,SAAW,IAEzB,IAAXZ,EAAJ,CAMA,GAAe,OAAXF,EAAiB,CACnB,IAAMkB,EAAIC,OAAOC,OAAOC,EAAQC,KAAKC,MAAsB,EAAhBD,KAAKE,YAChDN,EAAEO,OAASH,KAAKI,KAAKR,EAAEO,OAASvB,EAAQoB,KAAKE,SAAWF,KAAKK,KAAKzB,GAASA,GAC3EgB,EAAEU,QAAUN,KAAKI,KAAKR,EAAEU,QAAU1B,EAAQoB,KAAKE,SAAWF,KAAKK,KAAKzB,GAASA,GAC7EgB,EAAEW,QAAUP,KAAKI,KAAKR,EAAEW,QAAU3B,EAAQoB,KAAKE,SAAWF,KAAKK,KAAKzB,GAASA,GAC7ED,EAAUiB,GACVb,EAAYa,EAAEO,QAMhB,GAHe,OAAX3B,GACFC,EAAU,OAERT,GAAYE,GAAOQ,GAAoB,MAAVF,EAE/B,GADAD,GAAW,GACO,KAAdS,EAAkB,CACpB,GAAIZ,GAAM,EAOR,OANAK,EAAU,MACVE,EAAU,MACVM,EAAa,IACbV,GAAW,GACXJ,EAAO,WACPE,EAAMH,EAAIyB,SAAS,IAIrB,IAAIa,EAAM1B,EACRkB,KAAKS,IAAI,EAAIvC,EAAIyB,SAAS,GAAKjB,EAAO6B,QACpCP,KAAKC,MAAMD,KAAKE,SAAWhC,EAAIyB,SAAS,GAAKzB,EAAIyB,SAAS,GAAK,IACnEZ,EAAYyB,GACZ/B,EAAU,IAERQ,EADEuB,EAAM,EACK,MAEA,UAEV,GAAe,KAAXhC,EAAe,CACxB,GAAIM,GAAY,EASd,OARAL,EAAU,MACVN,EAAO,MACPQ,EAAU,MACVE,EAAS6B,SAAS9B,GAAS,GAC3BW,aAAaoB,QAAQ,QAASD,SAAS9B,GAAS,GAChDP,EAAMH,EAAIyB,SAAS,IACnBpB,GAAW,QACXU,EAAa,IAIfb,GAAM4B,KAAKS,IAAI,EAAI/B,EAAO4B,QAAUpC,EAAIyB,SAAS,GAC/CK,KAAKC,MAAMD,KAAKE,SAAWxB,EAAO4B,QAAU5B,EAAO4B,QAAU,IAC/DjC,EAAMD,GAENa,EAAa,IACTb,EAAK,GACPK,EAAU,aA3DdI,EAASU,aAAaC,QAAQ,UAAY,KAgE3C,KAEI,WACLoB,cAAc/C,EAAMwB,aAKtB,qBAAKwB,UAAU,kBAAf,SAEI7C,GAAYE,GAAOQ,EACjB,gCACE,wCAAME,EAAN,YACA,iEAAWM,KACX,sBAAK2B,UAAU,QAAf,UACE,qBAAKA,UAAU,gBAAf,SACE,qBAAKA,UAAWrC,EAAQsC,IAAK5C,EAAI6C,QAASC,IAAI,OAEhD,qBAAKH,UAAU,uBAAf,SACE,qBAAKA,UAAW7B,EAAW8B,IAAKpC,EAAOuC,OAAQD,IAAI,UAGvD,sBAAKH,UAAU,kBAAf,UACE,sBAAKA,UAAU,QAAf,UACE,4BAAG,0BAAUA,UAAU,cAAcJ,IAAKvC,EAAIyB,SAAS,GAAIuB,MAAO9C,MAClE,mCAAK,oBAAG+C,QAAU,QAAb,gBAAyB/C,EAAzB,IAA8BF,EAAIyB,SAAS,GAAG,wBAAQkB,UAAU,aACnEO,QAAS,WACP,GAAIlC,GAAQ,IAAK,CACfC,EAAQD,EAAO,KACfK,aAAaoB,QAAQ,OAAQzB,EAAO,KACpC,IAAImC,EACF5B,KAAKC,MAAMH,aAAaC,QAAQ,SAGlC6B,EADS9B,aAAaC,QAAQ,aACvBG,SAAS,KAAQf,EACxBV,EAAIyB,SAAS,KAAQf,EACrBW,aAAaoB,QAAQ,OAAQlB,KAAK6B,UAAUD,MAXC,kBAAnD,OAcC,8BAAG,oBAAGF,QAAU,QAAb,iBAA0BjD,EAAIyB,SAAS,GAAG,wBAAQkB,UAAU,aAC9DO,QAAS,WACP,GAAIlC,GAAQ,IAAK,CACfC,EAAQD,EAAO,KACfK,aAAaoB,QAAQ,OAAQzB,EAAO,KACpC,IAAImC,EACF5B,KAAKC,MAAMH,aAAaC,QAAQ,SAGlC6B,EADS9B,aAAaC,QAAQ,aACvBG,SAAS,KAAQf,EACxBV,EAAIyB,SAAS,KAAQf,EACrBW,aAAaoB,QAAQ,OAAQlB,KAAK6B,UAAUD,MAXJ,kBAA7C,OAcD,8BAAG,qCAAQnD,EAAIyB,SAAS,GAAG,wBAAQkB,UAAU,aAAaO,QAAS,WACjE,GAAIlC,GAAQ,IAAK,CACfC,EAAQD,EAAO,KACfK,aAAaoB,QAAQ,OAAQzB,EAAO,KACpC,IAAImC,EACF5B,KAAKC,MAAMH,aAAaC,QAAQ,SAGlC6B,EADS9B,aAAaC,QAAQ,aACvBG,SAAS,KAAQK,KAAKI,KAAKJ,KAAKK,KAAKzB,IAC5CV,EAAIyB,SAAS,KAAQK,KAAKI,KAAKJ,KAAKK,KAAKzB,IACzCW,aAAaoB,QAAQ,OAAQlB,KAAK6B,UAAUD,MAVrB,kBAA3B,UAcF,sBAAKR,UAAU,QAAf,UACE,4BAAG,0BAAUA,UAAU,cAAcJ,IAAK/B,EAAOyB,OAAQe,MAAOpC,MAChE,4BAAG,oCAAOA,EAAP,IAAkBJ,EAAOyB,YAC5B,4BAAG,qCAAQzB,EAAO4B,aAClB,4BAAG,qCAAQ5B,EAAO6B,sBAKxBjC,EAAU,4CAAsB,qFCzK1CiD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.9253397b.chunk.js","sourcesContent":["import crab from'./img/crab.png';\r\nimport flyDragon from './img/flydragon.png'\r\nexport default [{\r\n        \"id\": 1,\r\n        \"name\": \"crabKing\",\r\n        \"imgURL\": crab,\r\n        \"hpbase\":256,\r\n        \"atkbase\":10,\r\n        \"defbase\":45\r\n    },\r\n    {\r\n        \"id\": 2,\r\n        \"name\": \"flyDragon\",\r\n        \"imgURL\": flyDragon,\r\n        \"hpbase\":80,\r\n        \"atkbase\":230,\r\n        \"defbase\":9\r\n    }\r\n]","export default __webpack_public_path__ + \"static/media/crab.4783935e.png\";","export default __webpack_public_path__ + \"static/media/flydragon.d74481c2.png\";","import { useState, useEffect, useRef } from 'react'\nimport './App.css';\nimport monster from './monster';\n\nfunction App() {\n  let timer = useRef();\n  let [activeID, setActivityID] = useState(\"\");\n  let [pet, setPet] = useState(null);\n  let [hp, setHp] = useState(null);\n  let [loading, setLoading] = useState(true);\n  let [petatk, setPetatk] = useState(null);\n  let [enermy, setEnermy] = useState(null);\n  let [level, setLevel] = useState(-1);\n  let [enermyhp, setEnermyhp] = useState(null);\n  let [enermyatk, setEnermyatk] = useState(\"\");\n  let [coin, setCoin] = useState(null);\n  useEffect(() => {\n    timer.current = setInterval(() => {\n      //初始化宠物\n      if (pet === null) {\n        let activeID = localStorage.getItem(\"activeID\");\n\n        if (!activeID) {\n          setLoading(false);\n          return;\n        }\n        setActivityID(activeID);\n        let pet = (JSON.parse(localStorage.getItem(\"pets\")));\n        setPet(pet[activeID]);\n        setHp(pet[activeID].monProps[0]);\n      }\n\n      setCoin(localStorage.getItem(\"coin\") || 0);\n      //初始化关卡\n      if (level === -1) {\n        setLevel(localStorage.getItem(\"level\") || 1);\n        return;\n      }\n\n      //初始化敌人\n      if (enermy === null) {\n        const m = Object.create(monster[Math.floor(Math.random() * 2)]);\n        m.hpbase = Math.ceil(m.hpbase * level + Math.random() * Math.sqrt(level) * level);\n        m.atkbase = Math.ceil(m.atkbase * level + Math.random() * Math.sqrt(level) * level);\n        m.defbase = Math.ceil(m.defbase * level + Math.random() * Math.sqrt(level) * level);\n        setEnermy(m);\n        setEnermyhp(m.hpbase);\n      }\n\n      if (petatk === null)\n        setPetatk(\"atk\");\n\n      if (activeID && pet && enermy && petatk != null) {\n        setLoading(false);\n        if (enermyatk === \"\") {\n          if (hp <= 0) {\n            setPetatk(null);\n            setEnermy(null);\n            setEnermyatk(\"\");\n            setLoading(true);\n            setPet(null);\n            setHp(pet.monProps[0]);\n            return;\n          }\n\n          let tem = enermyhp -\n            Math.max(0, (pet.monProps[1] - enermy.defbase) +\n              Math.floor(Math.random() * pet.monProps[1] - pet.monProps[1] / 2));\n          setEnermyhp(tem);\n          setPetatk(\"\");\n          if (tem > 0) {\n            setEnermyatk(\"atk\");\n          }else{\n            setEnermyatk(\"-\");\n          }\n        } else if (petatk === \"\") {\n          if (enermyhp <= 0) {\n            setPetatk(null);\n            setPet(null);\n            setEnermy(null);\n            setLevel(parseInt(level) + 1);\n            localStorage.setItem(\"level\", parseInt(level) + 1);\n            setHp(pet.monProps[0]);\n            setLoading(true);\n            setEnermyatk(\"\");\n            return;\n          }\n\n          hp -= Math.max(0, (enermy.atkbase - pet.monProps[2]) +\n            Math.floor(Math.random() * enermy.atkbase - enermy.atkbase / 2));\n          setHp(hp);\n\n          setEnermyatk(\"\");\n          if (hp > 0) {\n            setPetatk(\"atk\");\n          }\n\n        }\n      }\n    }, 1000);\n\n    return () => {\n      clearInterval(timer.current);\n    }\n  });\n\n  return (\n    <div className=\"fight-container\">\n      {\n        activeID && pet && enermy ?\n          <div>\n            <h1>第{level}关</h1>\n            <div>时空能量：{coin}</div>\n            <div className=\"fight\">\n              <div className=\"img-container\">\n                <img className={petatk} src={pet.dataURL} alt=\"\" />\n              </div>\n              <div className=\"img-container enermy\">\n                <img className={enermyatk} src={enermy.imgURL} alt=\"\" />\n              </div>\n            </div>\n            <div className=\"props-container\">\n              <div className=\"props\">\n                <b><progress className=\"HP-progress\" max={pet.monProps[0]} value={hp}></progress></b>\n                <p>  <b display = \"block\">HP:{hp}/{pet.monProps[0]}<button className=\"props-plus\"\n                  onClick={() => {\n                    if (coin >= 100) {\n                      setCoin(coin - 100);\n                      localStorage.setItem(\"coin\", coin - 100);\n                      let ps =\n                        JSON.parse(localStorage.getItem(\"pets\"));\n\n                      let id = localStorage.getItem(\"activeID\");\n                      ps[id].monProps[0] -= (-level);\n                      pet.monProps[0] -= (-level);\n                      localStorage.setItem(\"pets\", JSON.stringify(ps));\n                    }\n                  }}>+</button></b> </p>\n                 <p><b display = \"block\">ATK:{pet.monProps[1]}<button className=\"props-plus\"\n                  onClick={() => {\n                    if (coin >= 100) {\n                      setCoin(coin - 100);\n                      localStorage.setItem(\"coin\", coin - 100);\n                      let ps =\n                        JSON.parse(localStorage.getItem(\"pets\"));\n\n                      let id = localStorage.getItem(\"activeID\");\n                      ps[id].monProps[1] -= (-level);\n                      pet.monProps[1] -= (-level);\n                      localStorage.setItem(\"pets\", JSON.stringify(ps));\n                    }\n                  }}>+</button></b> </p>\n                <p><b>DEF:{pet.monProps[2]}<button className=\"props-plus\" onClick={() => {\n                  if (coin >= 100) {\n                    setCoin(coin - 100);\n                    localStorage.setItem(\"coin\", coin - 100);\n                    let ps =\n                      JSON.parse(localStorage.getItem(\"pets\"));\n\n                    let id = localStorage.getItem(\"activeID\");\n                    ps[id].monProps[2] -= (-Math.ceil(Math.sqrt(level)));\n                    pet.monProps[2] -= (-Math.ceil(Math.sqrt(level)));\n                    localStorage.setItem(\"pets\", JSON.stringify(ps));\n                  }\n                }}>+</button></b> </p>\n              </div>\n              <div className=\"props\">\n                <b><progress className=\"HP-progress\" max={enermy.hpbase} value={enermyhp}></progress></b>\n                <p><b>HP:{enermyhp}/{enermy.hpbase}</b></p>\n                <p><b>ATK:{enermy.atkbase}</b></p>\n                <p><b>DEF:{enermy.defbase}</b></p>\n              </div>\n            </div>\n          </div>\n          :\n          loading ? <h1>Loading...</h1> : <h1>请先设置上场宠物</h1>\n      }\n    </div>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}