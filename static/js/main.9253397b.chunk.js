(this.webpackJsonpfight=this.webpackJsonpfight||[]).push([[0],{10:function(e,t,a){},12:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),r=a(4),l=a.n(r),n=(a(9),a(2)),o=(a(10),[{id:1,name:"crabKing",imgURL:a.p+"static/media/crab.4783935e.png",hpbase:256,atkbase:10,defbase:45},{id:2,name:"flyDragon",imgURL:a.p+"static/media/flydragon.d74481c2.png",hpbase:80,atkbase:230,defbase:9}]),i=a(0);var b=function(){var e=Object(s.useRef)(),t=Object(s.useState)(""),a=Object(n.a)(t,2),c=a[0],r=a[1],l=Object(s.useState)(null),b=Object(n.a)(l,2),j=b[0],p=b[1],m=Object(s.useState)(null),d=Object(n.a)(m,2),h=d[0],O=d[1],u=Object(s.useState)(!0),g=Object(n.a)(u,2),f=g[0],x=g[1],S=Object(s.useState)(null),v=Object(n.a)(S,2),I=v[0],M=v[1],N=Object(s.useState)(null),P=Object(n.a)(N,2),k=P[0],y=P[1],J=Object(s.useState)(-1),D=Object(n.a)(J,2),q=D[0],L=D[1],R=Object(s.useState)(null),E=Object(n.a)(R,2),H=E[0],U=E[1],C=Object(s.useState)(""),K=Object(n.a)(C,2),w=K[0],A=K[1],F=Object(s.useState)(null),T=Object(n.a)(F,2),B=T[0],z=T[1];return Object(s.useEffect)((function(){return e.current=setInterval((function(){if(null===j){var e=localStorage.getItem("activeID");if(!e)return void x(!1);r(e);var t=JSON.parse(localStorage.getItem("pets"));p(t[e]),O(t[e].monProps[0])}if(z(localStorage.getItem("coin")||0),-1!==q){if(null===k){var a=Object.create(o[Math.floor(2*Math.random())]);a.hpbase=Math.ceil(a.hpbase*q+Math.random()*Math.sqrt(q)*q),a.atkbase=Math.ceil(a.atkbase*q+Math.random()*Math.sqrt(q)*q),a.defbase=Math.ceil(a.defbase*q+Math.random()*Math.sqrt(q)*q),y(a),U(a.hpbase)}if(null===I&&M("atk"),c&&j&&k&&null!=I)if(x(!1),""===w){if(h<=0)return M(null),y(null),A(""),x(!0),p(null),void O(j.monProps[0]);var s=H-Math.max(0,j.monProps[1]-k.defbase+Math.floor(Math.random()*j.monProps[1]-j.monProps[1]/2));U(s),M(""),A(s>0?"atk":"-")}else if(""===I){if(H<=0)return M(null),p(null),y(null),L(parseInt(q)+1),localStorage.setItem("level",parseInt(q)+1),O(j.monProps[0]),x(!0),void A("");h-=Math.max(0,k.atkbase-j.monProps[2]+Math.floor(Math.random()*k.atkbase-k.atkbase/2)),O(h),A(""),h>0&&M("atk")}}else L(localStorage.getItem("level")||1)}),1e3),function(){clearInterval(e.current)}})),Object(i.jsx)("div",{className:"fight-container",children:c&&j&&k?Object(i.jsxs)("div",{children:[Object(i.jsxs)("h1",{children:["\u7b2c",q,"\u5173"]}),Object(i.jsxs)("div",{children:["\u65f6\u7a7a\u80fd\u91cf\uff1a",B]}),Object(i.jsxs)("div",{className:"fight",children:[Object(i.jsx)("div",{className:"img-container",children:Object(i.jsx)("img",{className:I,src:j.dataURL,alt:""})}),Object(i.jsx)("div",{className:"img-container enermy",children:Object(i.jsx)("img",{className:w,src:k.imgURL,alt:""})})]}),Object(i.jsxs)("div",{className:"props-container",children:[Object(i.jsxs)("div",{className:"props",children:[Object(i.jsx)("b",{children:Object(i.jsx)("progress",{className:"HP-progress",max:j.monProps[0],value:h})}),Object(i.jsxs)("p",{children:["  ",Object(i.jsxs)("b",{display:"block",children:["HP:",h,"/",j.monProps[0],Object(i.jsx)("button",{className:"props-plus",onClick:function(){if(B>=100){z(B-100),localStorage.setItem("coin",B-100);var e=JSON.parse(localStorage.getItem("pets"));e[localStorage.getItem("activeID")].monProps[0]-=-q,j.monProps[0]-=-q,localStorage.setItem("pets",JSON.stringify(e))}},children:"+"})]})," "]}),Object(i.jsxs)("p",{children:[Object(i.jsxs)("b",{display:"block",children:["ATK:",j.monProps[1],Object(i.jsx)("button",{className:"props-plus",onClick:function(){if(B>=100){z(B-100),localStorage.setItem("coin",B-100);var e=JSON.parse(localStorage.getItem("pets"));e[localStorage.getItem("activeID")].monProps[1]-=-q,j.monProps[1]-=-q,localStorage.setItem("pets",JSON.stringify(e))}},children:"+"})]})," "]}),Object(i.jsxs)("p",{children:[Object(i.jsxs)("b",{children:["DEF:",j.monProps[2],Object(i.jsx)("button",{className:"props-plus",onClick:function(){if(B>=100){z(B-100),localStorage.setItem("coin",B-100);var e=JSON.parse(localStorage.getItem("pets"));e[localStorage.getItem("activeID")].monProps[2]-=-Math.ceil(Math.sqrt(q)),j.monProps[2]-=-Math.ceil(Math.sqrt(q)),localStorage.setItem("pets",JSON.stringify(e))}},children:"+"})]})," "]})]}),Object(i.jsxs)("div",{className:"props",children:[Object(i.jsx)("b",{children:Object(i.jsx)("progress",{className:"HP-progress",max:k.hpbase,value:H})}),Object(i.jsx)("p",{children:Object(i.jsxs)("b",{children:["HP:",H,"/",k.hpbase]})}),Object(i.jsx)("p",{children:Object(i.jsxs)("b",{children:["ATK:",k.atkbase]})}),Object(i.jsx)("p",{children:Object(i.jsxs)("b",{children:["DEF:",k.defbase]})})]})]})]}):f?Object(i.jsx)("h1",{children:"Loading..."}):Object(i.jsx)("h1",{children:"\u8bf7\u5148\u8bbe\u7f6e\u4e0a\u573a\u5ba0\u7269"})})};l.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(b,{})}),document.getElementById("root"))},9:function(e,t,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.9253397b.chunk.js.map